import{c as y,d as v,m as d,b as M,a as C,C as l}from"./_general_scripts.4e20f1e4.js";function b(){import("data:text/javascript,")}var k={load:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"//api-maps.yandex.ru/2.1/?lang=en_RU",m=function(){var r=a.match(/[\\?&]ns=([^&#]*)/);return r===null?"":decodeURIComponent(r[1].replace(/\+/g," "))};return this.promise||(this.promise=new Promise(function(o,r){var c=document.createElement("script");c.onload=o,c.onerror=r,c.type="text/javascript",c.src=a,document.body.appendChild(c)}).then(function(){var o=m();return o&&o!=="ymaps"&&(0,eval)("var ymaps = ".concat(o,";")),new Promise(function(r){return ymaps.ready(r)})})),this.promise}};const _=(u=".contacts__map-container")=>{let a;const m=n=>{let e='<div class="balloon-container">';return n!=null&&n.address&&(e+=`<div class="balloon-container__header">${n.address}</div>`),Array.isArray(n==null?void 0:n.schedule)&&n.schedule.length>0&&(e+='<div class="balloon-container__body"><ul>',n.schedule.forEach(t=>{e+=`<li><span>${t.days}:</span>${t.time}</li>`}),e+="</ul></div>"),e+="</div>",e},o=(n,e)=>{const t=m(e);return n.templateLayoutFactory.createClass(t)},r=(n,e)=>{var t,s,i,p;return new n.Placemark([(s=(t=e.coord)==null?void 0:t.x)!=null?s:0,(p=(i=e.coord)==null?void 0:i.y)!=null?p:0],{},{balloonContentLayout:o(n,e),balloonPanelMaxMapArea:0,iconLayout:"default#imageWithContent",iconImageHref:"/local/templates/public/svg/mark_icon.svg",iconImageSize:[22,28],iconImageOffset:[-11,-14],iconContentOffset:[15,15]})},c=(n,e)=>Array.isArray(e)?e.map(t=>r(n,t)):[],f=(n,e,t)=>{const s=c(e,t);s.length>0&&s.forEach(i=>{n.geoObjects.add(i)})},h=(n,e)=>new n.Map(a,{center:[e.x,e.y],zoom:14}),g=async n=>{if(n)return n;let e=[];return await fetch(`${window.location.origin}/local/php_interface/functions/getMapMark.php`,{method:"POST",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{e=t}).catch(),e};return{initMap:async n=>{const e=await g(n);if(!e)return;let t,s;if(a=document.querySelector(u),!!a){try{t=await k.load()}catch{return}try{s=h(t,e.coord)}catch{return}try{f(s,t,e.marks)}catch{}}}}};document.addEventListener("DOMContentLoaded",()=>{const u=[{selector:"#id-mask-phone",mask:"+7 (999) 999-99-99"}],{show:a}=y([new v({component:d.formLetterSuccess})]);(()=>{M(u),_().initMap(),C(new l({rules:{name:[],phone:[l.availRules.require,l.availRules.phone],email:[l.availRules.email],agree:[l.availRules.require]},callbackSuccess:()=>a(d.formLetterSuccess)})).initializeYmItems()})()});export{b as __vite_legacy_guard};
